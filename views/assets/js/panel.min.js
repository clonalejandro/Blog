class PostTable{constructor(){this.posts=new Array,this.trigger=10,this.requestLastPosts()}requestLastPosts(){const t=`/api/last-entries?key=${apiKey}&amount=100`,e=new XMLHttpRequest;e.open("get",t,!0),e.onreadystatechange=(t=>{4===e.readyState&&(200===e.status?(this.posts=JSON.parse(e.responseText),this.buildPosts()):console.error(e.statusText))}),e.send()}buildPosts(){for(let t=0;t<this.trigger;t++){if(!this.posts.length||null==this.posts[t]){$("#load-more").remove();break}const e=this.posts[t],s={postId:e.postId,title:e.title,url:e.url};let o="<tr>";o+="<td>"+`<a style='color: white' class='no-decoration' href='/posts${s.url}'>${s.postId}</a>`+"</td>",o+="<td>"+`<a style='color: white' class='no-decoration' href='/posts${s.url}'>${s.title}</a>`+"</td>",o+="<td>"+`<a class='btn btn-icon trasher red animated' onclick='openTrasher(this)' id='D${s.postId}'><i class='icon icons-trash'></i></a>`+"</td>",$("#posts").append(o)}this.posts.splice(0,this.trigger)}}var postId=0;const modalTrasher=new Modal("modalTrasher",{registerCloseEvent:!0,registerCloseOut:!0});function strip(t){return(new DOMParser).parseFromString(t,"text/html").body.textContent||""}function onContentChange(){const t=strip($(".jqte_editor").html()).substr(0,77)+"...";$("#description").attr("value",t)}function deleteEntrie(){const t="/api/delete-entrie?postId="+postId,e=new XMLHttpRequest;e.open("post",t,!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.onreadystatechange=(t=>{4===e.readyState&&(200===e.status?(this.posts=JSON.parse(e.responseText),this.buildPosts()):console.error(e.statusText))}),e.send("postId="+postId),$($("#D"+postId).parent().parent()[0]).remove(),modalTrasher.close()}function actionManager(t){const e=t.id,s=t.childNodes[0];"create"==e?($("#posts").attr("style","display: none"),$("#creator").attr("style",null),t.setAttribute("id","return"),s.setAttribute("class","icons-arrow-thin-left")):"return"==e&&($("#posts").attr("style",null),$("#creator").attr("style","display: none"),t.setAttribute("id","create"),s.setAttribute("class","icons-plus"))}function openTrasher(t){modalTrasher.open(),postId=t.id.replace("D","")}$(document).ready(()=>{new PostTable;$("#modalTrasher .delete").click(()=>deleteEntrie()),$("textarea").jqte({change:onContentChange}).jqteVal("<span style='color: red'>Put your post content here</span>"),$("[name=tags]").tagify({maxTags:20,delimiters:","})});